<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kicker Controller: managed_components/espressif__esp-now/examples/coin_cell_demo Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kicker Controller
   </div>
   <div id="projectbrief">Senior Design Project 2025 for the Controller for the Kicker Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_230ff1e69d1001871a4401f345fc5388.html">managed_components</a></li><li class="navelem"><a class="el" href="dir_53b0c73583c5ec3ac167a7c3a40a70e1.html">espressif__esp-now</a></li><li class="navelem"><a class="el" href="dir_a284544a182ea467cb5e8d18d1856e3a.html">examples</a></li><li class="navelem"><a class="el" href="dir_02d729a9bcfd44fbfa7cd16b2f60fa51.html">coin_cell_demo</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">coin_cell_demo Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_f72bcaec21972fbce38f371e3546e714.html">bulb</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_905b9acb8070c735bdb23796f506553a.html">switch</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This example provides a low-power solution to achieve wireless control which has two sub-projects SWITCH (switch) and BULB (controlled end). The switch with a CR2032 coin cell battery can be used to send 65000 packets and the actual lifetime is calculated to be 2.5 years if it is pressed 50 times a day and the receiver switches channels once a day.</p>
<h1><a class="anchor" id="autotoc_md47"></a>
Functionality</h1>
<h2><a class="anchor" id="autotoc_md48"></a>
switch</h2>
<p>The switch device sends the control commands to change the <code>RGB LED</code> status of the bulb devices. By default, the switch app runs on the coin cell button to control the bulb devices. If you don't have such button, you can use other ESP32 series DevKits to simulate the switch.</p>
<p>Open the project configuration menu (<code>idf.py menuconfig</code>) to set following configurations under <code>Example Configuration</code> Options:</p>
<ul>
<li>Set <code>Use coin cell button</code> of example to <code>N</code> to simulate.</li>
</ul>
<blockquote class="doxtable">
<p><b>Note:</b> The default configuration has light-sleep enabled in ESP-NOW component. If you are running the app on a DevKit, you can enable app level power saving by setting the following configurations to true:</p><ul>
<li>CONFIG_PM_ENABLE</li>
<li>CONFIG_FREERTOS_USE_TICKLESS_IDLE</li>
<li>CONFIG_GPIO_BUTTON_SUPPORT_POWER_SAVE </li>
</ul>
</blockquote>
<h2><a class="anchor" id="autotoc_md49"></a>
bulb</h2>
<p>The bulb devices change the <code>RGB LED</code> status when receiving the control commands from switch devices.</p>
<h1><a class="anchor" id="autotoc_md50"></a>
Hardware Required</h1>
<h2><a class="anchor" id="autotoc_md51"></a>
ESP32 series DevKit</h2>
<p>This example can run on any ESP32 series boards and at least two development boards (for example: ESP32-C3-DevKitM-1) are required.</p>
<ul>
<li>You need to use the <code>BOOT</code> button on the development boards as switch devices to simulate.</li>
<li>You need to use <code>RGB LED</code> on the development boards as bulb devices to demonstrate.</li>
</ul>
<h2><a class="anchor" id="autotoc_md52"></a>
coin cell button</h2>
<p>Switch example can run on coin cell button which uses ESP32C2 chip. The images below show the front and back view of the coin cell button. <img src="switch/docs/img/coin_cell_button_front.png" alt="button front view" class="inline"/> <img src="switch/docs/img/coin_cell_button_back.png" alt="button back view" class="inline"/></p>
<p>You can reference the schematic as follows: <img src="switch/docs/img/coin_cell_schematic.png" alt="button schematic" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md53"></a>
How to Use the Example</h1>
<h2><a class="anchor" id="autotoc_md54"></a>
switch</h2>
<blockquote class="doxtable">
<p><b>Note:</b> The device can only control the bound devices, so it must be bound before control. </p>
</blockquote>
<h3><a class="anchor" id="autotoc_md55"></a>
ESP32 series DevKit</h3>
<ul>
<li>Double click the <code>BOOT</code> button on the device, it will send the binding command.</li>
<li>Single click the <code>BOOT</code> button on the device, it will send the control command.</li>
<li>Long press (more than 1.5 seconds) the <code>BOOT</code> button on the device, it will send the unbinding command.</li>
</ul>
<h3><a class="anchor" id="autotoc_md56"></a>
coin cell button</h3>
<ul>
<li>Open the project and compile the firmware as default config.</li>
<li>Connect the <a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-dev-kits/en/latest/other/esp-prog/index.html#">ESP-Prog</a> board and button use 2*3-PIN 1.27 mm male shrouded box header.</li>
<li>Download the firmware by the command <code>idf.py -p /dev/ttyUSB1 flash</code> on Ubuntu or <a href="https://www.espressif.com/sites/default/files/tools/flash_download_tool_3.9.4.zip">Flash Download Tools</a> on windows.</li>
<li>Press and hold the key on the device for more than 2s, it will send the binding command.</li>
<li>Click the key on the device, it will send the control command.</li>
<li>Press and hold the key on the device for more than 4s, it will send the unbinding command.</li>
</ul>
<p>Output sample from the switch:</p>
<div class="fragment"><div class="line">app_switch: switch bind press</div>
</div><!-- fragment --><div class="fragment"><div class="line">app_switch: switch send press</div>
</div><!-- fragment --><div class="fragment"><div class="line">app_switch: switch unbind press</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md57"></a>
bulb</h2>
<ul>
<li>The devices receive the binding command, the <code>RGB LED</code> on these devices will turn green, indicating that the devices have been bound successfully.</li>
<li>The devices receive the control command, the status of <code>RGB LED</code> (ON/OFF) will be controlled by the switch device, and the color will be white.</li>
<li>The devices receive the unbinding command, the <code>RGB LED</code> on these devices will turn red, indicating that the devices have been unbound successfully.</li>
</ul>
<blockquote class="doxtable">
<p><b>Note:</b> Reboot the devices quickly also can unbind </p>
</blockquote>
<p>Output sample from the bulb:</p>
<div class="fragment"><div class="line">app_bulb: bind, uuid: 10:97:bd:f2:50:08, initiator_type: 513</div>
</div><!-- fragment --><div class="fragment"><div class="line">app_bulb: app_bulb_ctrl_data_cb, initiator_attribute: 513, responder_attribute: 1, value: 0</div>
<div class="line">app_bulb: app_bulb_ctrl_data_cb, initiator_attribute: 513, responder_attribute: 1, value: 1</div>
</div><!-- fragment --><div class="fragment"><div class="line">app_bulb: unbind, uuid: 10:97:bd:f2:50:08, initiator_type: 513</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md58"></a>
Other Applications</h1>
<p>For application using the coin cell button to work with a <a href="https://github.com/espressif/esp-matter/tree/main/examples/esp-now_bridge_light">ESP-NOW Matter bridge</a>, refer to this <a class="el" href="md_managed__components_2espressif____esp-now_2examples_2coin__cell__demo_2switch_2docs_2button__in__matter__bridging.html">Application Note</a>. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
