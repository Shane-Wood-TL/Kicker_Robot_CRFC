<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kicker Controller: ESP-NOW</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kicker Controller
   </div>
   <div id="projectbrief">Senior Design Project 2025 for the Controller for the Kicker Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">ESP-NOW</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md176"></a></p>
<p>This project provides examples to simplify the use of ESP-NOW. <br  />
</p>
<p><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/network/esp_now.html">ESP-NOW</a> is a kind of connectionless Wi-Fi communication protocol that is defined by Espressif. Different from traditional Wi-Fi protocols, the first five upper layers in OSI are simplified to one layer in ESP-NOW, so the data doesn't need to be transmitted through the network layer, the transport layer, the session layer, the presentation layer, and the application layer, which reduces the delay caused by packet loss under congested network, and leads to quickly response time.</p>
<p><img src="docs/_static/en/protocol_stack.png" alt="" width="800" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md177"></a>
Introduction</h1>
<p>The <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/network/esp_now.html">ESP-NOW</a> provided by <a href="https://github.com/espressif/esp-idf">ESP-IDF</a> is the ESP-NOW protocol, this component provides some high-level functionalities to simplify the use of ESP-NOW protocol, you can understand this component as an application-level ESP-NOW, which provides some enhanced features, including pairing, control, provisioning, debug, OTA, security, etc.</p>
<p>ESP-NOW occupies less CPU and flash resource. It can work with Wi-Fi and Bluetooth LE, and supports the series of ESP8266、ESP32、ESP32-S and ESP32-C. The data transmission mode of ESP-NOW is flexible including unicast and broadcast, and supports one-to-many and many-to-many device connection and control.</p>
<p><img src="docs/_static/en/function_list.png" alt="" width="800" class="inline"/></p>
<p>There are two roles defined in ESP-NOW according to the data flow, initiator and responder. The same device can have two roles at the same time. Generally, switches, sensors, LCD screens, etc. play the role of initiator in an IoT system, when lights, sockets and other smart applications play the role of responder.</p>
<p><img src="docs/_static/en/device_role.png" alt="" width="750" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md178"></a>
TODO List</h1>
<ul class="check">
<li class="unchecked">Gateway</li>
</ul>
<ul class="check">
<li class="unchecked">Low-power</li>
</ul>
<ul class="check">
<li class="unchecked">Frequency-Hopping</li>
</ul>
<h2><a class="anchor" id="autotoc_md179"></a>
IDF Version</h2>
<p>The following table shows the ESP-IDF versions supported by esp-now at the current time. The lable <img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/> means supported, and the lable <img src="docs/_static/no-icon.png" alt="alt text" class="inline"/> means not supported.</p>
<p>The ESP-IDF master branch is marked as not supported because the major feature changes it has introduced may cause conflicts with esp-now. Yet, the esp-now examples not affected by those feature changes can still run correctly on the IDF master branch.</p>
<p>End of Life IDF branches are marked as not supported, such as ESP-IDF Release/v4.0. See <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/versions.html#support-periods">IDF Supported Periods</a> for details.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft"></th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v4.1   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v4.2   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v4.3   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v4.4   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v5.0   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v5.1   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Release/v5.2   </th><th class="markdownTableHeadCenter">ESP-IDF <br  />
 Master    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">esp-now <br  />
 Master   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">esp-now <br  />
 v2.x.x   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/> <sup> <b>2</b> </sup>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">esp-now <br  />
 v1.0   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/yes-checkm.png" alt="alt text" title="supported" class="inline"/> <sup> <b>1</b> </sup>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td><td class="markdownTableBodyCenter"><img src="docs/_static/no-icon.png" alt="alt text" title="not supported" class="inline"/>   </td></tr>
</table>
<p><b>Note 1:</b> The built-in IDF branch of esp-now v1.0 is IDF Release/v4.4 at the current time.</p>
<p><b>Note 2:</b> The built-in IDF branch of esp-now v2.x.x is from IDF Release/v4.4 at the current time.</p>
<h2><a class="anchor" id="autotoc_md180"></a>
Support Periods</h2>
<p>New feature development and bugfix usually take place on the master branch and will be published into <a href="https://components.espressif.com/">ESP Component Registry</a>. The publish time of the next version is usually a few months. When a new version of the ESP-NOW is published, please plan to upgrade to that version.</p>
<h1><a class="anchor" id="autotoc_md181"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md182"></a>
Hardware Preparation</h2>
<p>Chips of ESP32、ESP32-C3、ESP32-S2、ESP32-S3、ESP32C2、ESP32-C6 are recommended.</p>
<h2><a class="anchor" id="autotoc_md183"></a>
Set up Development Environment</h2>
<p>Setting the environment and getting ESP-IDF (release/v4.4 or tag v4.4) follow the <a href="https://docs.espressif.com/projects/esp-idf/en/release-v4.4/esp32/index.html">Step</a> .</p>
<h2><a class="anchor" id="autotoc_md184"></a>
Get the ESP-NOW project</h2>
<p>Download ESP-NOW using the following: </p><div class="fragment"><div class="line">git clone https://github.com/espressif/esp-now.git</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md185"></a>
Build and Flash firmware</h2>
<p>It is recommended to first erase the flash if you are using this for the first time and then flash the firmware. Here are the steps: </p><div class="fragment"><div class="line">$ cd /path/to/esp-now/examples/get-started/</div>
<div class="line">$ export ESPPORT=/dev/tty.SLAB_USBtoUART</div>
<div class="line">$ idf.py set-target esp32c3</div>
<div class="line">$ idf.py erase_flash</div>
<div class="line">$ idf.py flash monitor</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md186"></a>
Function</h1>
<h2><a class="anchor" id="autotoc_md187"></a>
Control</h2>
<p>There are some obvious advantages in ESP-NOW:</p>
<ol type="1">
<li><b>Quick Response</b>: After power-on, the devices can transmit data and control other paired devices directly without any wireless connection, and the response speed is in milliseconds.</li>
<li><b>Good Compatibility</b>: When the device connects to a router or works as a hotpot, it can also realize a fast and stable communication by ESP-NOW. And the device can keep stable connection through ESP-NOW even if the router is faulty or the network is unstable.</li>
<li><b>Long-distance Communication</b>: ESP-NOW supports long-distance communication. It can be applied to outdoor scenes and can keep stable connection even the devices are separated by walls even floors.</li>
<li><b>Multi-hop Control</b>: The multi-hop control of devices can be realized by ESP-NOW. Hundreds of devices can be controlled through unicast, broadcast and group control.</li>
</ol>
<h2><a class="anchor" id="autotoc_md188"></a>
Provision</h2>
<p>ESP-NOW provides a new provisioning method besides the Wi-Fi provisioning and Bluetooth provisioning. First, configuring the network for the first device via bluetooth, and other devices don't need to be configured the information of SSID/password, because the first device connected to the network can send these information to others directly. Users can choose whether to allow remaining devices to access the network on the APP side.</p>
<h2><a class="anchor" id="autotoc_md189"></a>
Upgrade</h2>
<p>ESP-NOW can be used for the mass data transmission like firmware upgrade.</p>
<ol type="1">
<li><b>Resume Upgrade from Break-point</b>: When use ESP-NOW to upgrade the firmware, the firmware will be subpackaged in a fixed size and be written to the flash one by one, and the device will record upgraded packages. If the upgrade process is interrupted, the device will only request the remaining firmware packages to resume upgrade from break point.</li>
<li><b>Multiple Devices Upgrade</b>: ESP-NOW can support multiple devices upgrade at same time. 50 devices can be upgraded in 3 minutes.</li>
<li><b>Rollback</b>: The firmware can rollback to previous version if an upgrade error occurs.</li>
</ol>
<h2><a class="anchor" id="autotoc_md190"></a>
Debug</h2>
<p>ESP-NOW can be used to receive the running log for debugging. It can be used in scene where the devices can't be contact directly because of the high-voltage electricity, high temperature. With the supporting of many-to-many connections, the initiator can receive logs from multiple responders to diagnose device faults quickly.</p>
<ol type="1">
<li>Device Log<ul>
<li>Log Analysis: analysis the running time and restart times from log.</li>
<li>Log Storage: store the acquired data in the SD cards or export to the web.</li>
<li>Log Level Modification: the log level of each function model can be freely adjusted.</li>
</ul>
</li>
<li>Debug Commands<ul>
<li>Peripheral Debugging: Control commands can be sent to test the peripherals like GPIO, UART, LED, etc.</li>
<li>Wi-Fi Debugging: The country code, Wi-Fi mode, Wi-Fi power, etc., can be adjusted, and the performance of Wi-Fi can be debugged.</li>
<li>Status Debugging: restart command, reset command, memory and task running status command.</li>
<li>Custom Commands</li>
</ul>
</li>
<li>Production Test<ul>
<li>Aging Test: random restart, long-term monitoring of device</li>
<li>Interference Test: distribute a large number of Wi-Fi data packets to interfere with the network.</li>
<li>Wireless Test: monitor the RF performance, ping packet test, distance and RF performance test.</li>
<li>Module Test: flash read time test, time accuracy test.</li>
<li>Version Verification: verify whether the factory version of the device is the specified version.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md191"></a>
Data Encryption</h2>
<p>ESP-NOW can protect the data security with ECDH and AES128-CCM.</p>
<ol type="1">
<li><b>Quick Configuration</b>: 16 devices can be configurated in 5 seconds.</li>
<li><b>Multiple Devices Handshake</b>: ESP-NOW initiator can support multiple devices handshake at same time.</li>
<li><b>Safety</b>:<ul>
<li>ECDH and Proof of Possession (PoP) string used to authorize session and derive shared key</li>
<li>AES256-CTR mode encryption for the configuration data</li>
<li>AES128-CCM mode encryption for ESP-NOW data.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md192"></a>
Resources</h1>
<ul>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32c3/api-reference/network/esp_now.html">ESP-NOW API guide</a></li>
<li><a href="https://github.com/yoursunny/WifiEspNow">ESP-NOW in Arduino</a></li>
<li>The <a href="https://esp32.com/">esp32.com forum</a> is a place to ask questions and find community resources.</li>
<li><a href="https://github.com/espressif/esp-now/issues">Check the Issues section on github</a> if you find a bug or have a feature request. Please check existing Issues before opening a new one.</li>
<li><a href="https://docs.espressif.com/projects/espressif-esp-faq/en/latest/">Troubleshooting</a> which include some common FAQs. Please click it if something is not working when you enable ESP-NOW in your project. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
