<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kicker Controller: Relinker</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kicker Controller
   </div>
   <div id="projectbrief">Senior Design Project 2025 for the Controller for the Kicker Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Relinker</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md28"></a></p>
<p>In ESP-IDF, some functions are put in SRAM when link stage, the reason is that some functions are critical, we need to put them in SRAM to speed up the program, or the functions will be executed when the cache is disabled. But actually, some functions can be put into Flash, here, we provide a script to let the user set the functions which are located in SRAM by default to put them into Flash, in order to save more SRAM which can be used as heap region later. This happens in the linker stage, so we call it as relinker.</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Use</h1>
<p>In order to use this feature, you need to include the needed CMake file in your project's CMakeLists.txt after <code>project(XXXX)</code>.</p>
<div class="fragment"><div class="line">project(XXXX)</div>
<div class="line"> </div>
<div class="line">include(relinker)</div>
</div><!-- fragment --><p>The relinker feature is disabled by default, in order to use it, you need to enable the option <code>CU_RELINKER_ENABLE</code> in menuconfig.</p>
<p>Here are the default configuration files in the folder <code>cmake_utilities/scripts/relinker/examples/esp32c2</code>, it's just used as a reference. If you would like to use your own configuration files, please enable option <code>CU_RELINKER_ENABLE_CUSTOMIZED_CONFIGURATION_FILES</code> and set the path of your configuration files as following, this path is evaluated relative to the project root directory:</p>
<div class="fragment"><div class="line">[*]     Enable customized relinker configuration files</div>
<div class="line">(path of your configuration files) Customized relinker configuration files path</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>Note: Currently only esp32c2 is supported. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md30"></a>
Configuration Files</h1>
<p>You can refer to the files in the directory of <code>cmake_utilities/scripts/relinker/examples/esp32c2</code>:</p>
<ul>
<li>library.csv</li>
<li>object.csv</li>
<li>function.csv</li>
</ul>
<p>For example, if you want to link function <code>__getreent</code> from SRAM to Flash, firstly you should add it to <code>function.csv</code> file as following:</p>
<div class="fragment"><div class="line">libfreertos.a,tasks.c.obj,__getreent,</div>
</div><!-- fragment --><p>This means function <code>__getreent</code> is in object file <code>tasks.c.obj</code>, and object file <code>tasks.c.obj</code> is in library <code>libfreertos.a</code>.</p>
<p>If function <code>__getreent</code> depends on the option <code>FREERTOS_PLACE_FUNCTIONS_INTO_FLASH</code> in menuconfig, then it should be:</p>
<div class="fragment"><div class="line">libfreertos.a,tasks.c.obj,__getreent,CONFIG_FREERTOS_PLACE_FUNCTIONS_INTO_FLASH</div>
</div><!-- fragment --><p>This means when only <code>FREERTOS_PLACE_FUNCTIONS_INTO_FLASH</code> is enabled in menuconfig, function <code>__getreent</code> will be linked from SRAM to Flash.</p>
<p>Next step you should add the path of the object file to <code>object.csv</code>:</p>
<div class="fragment"><div class="line">libfreertos.a,tasks.c.obj,esp-idf/freertos/CMakeFiles/__idf_freertos.dir/FreeRTOS-Kernel/tasks.c.obj</div>
</div><!-- fragment --><p>This means the object file <code>tasks.c.obj</code> is in library <code>libfreertos.a</code> and its location is <code>esp-idf/freertos/CMakeFiles/__idf_freertos.dir/FreeRTOS-Kernel/tasks.c.obj</code> relative to directory of <code>build</code>.</p>
<p>Next step you should add path of library to <code>library.csv</code>:</p>
<div class="fragment"><div class="line">libfreertos.a,./esp-idf/freertos/libfreertos.a</div>
</div><!-- fragment --><p>This means library <code>libfreertos.a</code>'s location is <code>./esp-idf/freertos/libfreertos.a</code> relative to <code>build</code>.</p>
<p>If above related data has exists in corresponding files, please don't add this repeatedly. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
