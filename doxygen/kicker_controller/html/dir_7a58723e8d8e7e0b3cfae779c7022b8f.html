<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kicker Controller: managed_components/espressif__esp-now/examples/wireless_debug Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kicker Controller
   </div>
   <div id="projectbrief">Senior Design Project 2025 for the Controller for the Kicker Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_230ff1e69d1001871a4401f345fc5388.html">managed_components</a></li><li class="navelem"><a class="el" href="dir_53b0c73583c5ec3ac167a7c3a40a70e1.html">espressif__esp-now</a></li><li class="navelem"><a class="el" href="dir_a284544a182ea467cb5e8d18d1856e3a.html">examples</a></li><li class="navelem"><a class="el" href="dir_7a58723e8d8e7e0b3cfae779c7022b8f.html">wireless_debug</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">wireless_debug Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_fa265e328710da6d952923b4c469bf27.html">components</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_2b1fb2e4852e98c93e8da6443661a459.html">main</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This example demonstrates how to debug the ESP-NOW devices.</p>
<h1><a class="anchor" id="autotoc_md156"></a>
Functionality</h1>
<p>ESP-NOW debug receiver board or monitored device provides the following features through UART or espnow command:</p>
<ul>
<li>Wi-Fi configuration: provides WiFi configuration, WiFi scan, WiFi ping commands.</li>
<li>ESP-NOW configuration: provides control, provisioning, OTA, configuration and iperf commands.</li>
<li>[System command]: provides heap, version, restart, power save, reset, rollback, coredump commands.</li>
<li>[Peripherals command]: provides GPIO, UART commands.</li>
<li>Command: runs commands on specific devices.</li>
<li>General command: includes help command to print all currently supported commands.</li>
</ul>
<p>ESP-NOW debug receiver board also provides the following features:</p>
<ul>
<li>Receives running log from ESP-NOW devices via <a href="https://esp-idf.readthedocs.io/en/latest/api-reference/wifi/esp_now.html">ESP-NOW</a> wireless transmission technology.</li>
<li>Web server: starts a HTTP web server, and PC web browser can get running log and status from the server.</li>
</ul>
<p>ESP-NOW monitored device also provides the following features:</p>
<ul>
<li>The device log data will be stored in flash and sent through ESP-NOW data.</li>
<li>The monitored device also implements the function of transferring log data to the TCP server on the HTTP network.</li>
</ul>
<blockquote class="doxtable">
<p>Note:</p>
<ol type="1">
<li>ESP-NOW debug receiver board can receive debugging data from devices only when the board is on the same Wi-Fi channel with the devices.</li>
<li>If the ESP-NOW debug receiver board is on the same channel with devices, you don't need to connect the board with the router. </li>
</ol>
</blockquote>
<h1><a class="anchor" id="autotoc_md157"></a>
Hardware Required</h1>
<p>This example can run on any ESP32 series boards and at least two development boards are required. One is the debug receiver board and others are monitored devices.</p>
<h1><a class="anchor" id="autotoc_md158"></a>
Configuration</h1>
<p>Open the project configuration menu (<code>idf.py menuconfig</code>) to configure "ESP-NOW debug monitor Mode" on debug receiver board or "ESP-NOW debug monitored Mode" on monitored devices.</p>
<p>For debug monitor mode, configure web server to debug devices through the web pages (Refer to Kconfig file).</p>
<p>For debug monitored mode, post monitored device log to HTTP server (Refer to Kconfig file).</p>
<h1><a class="anchor" id="autotoc_md159"></a>
How to Use the Example</h1>
<h2><a class="anchor" id="autotoc_md160"></a>
Workflow</h2>
<ol type="1">
<li>Compile and flash this project to an ESP32 development board;</li>
<li>Open serial port terminal and restart development board:</li>
</ol>
<blockquote class="doxtable">
<p>Please use serial port terminals such as <code>minicom</code> to avoid some unexpected problems when using <code>idf.py monitor</code>. </p>
</blockquote>
<ol type="1">
<li>Debug ESP-NOW by entering the following commands according to the prompts.</li>
</ol>
<blockquote class="doxtable">
<p>The following describes the use of each command in sequence. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md161"></a>
Serial Port Commands</h2>
<ul>
<li>ESP-NOW debug receiver board or monitored device supports the following serial port commands: help, wifi_config, wifi_scan, wifi_ping and command, provisioning, control, ota.</li>
<li>The interaction of serial port commands follows the following rules:<ol type="1">
<li>PC sends commands to ESP-NOW debug receiver board through serial port with a baud rate of 115200.</li>
<li>In command definition, all characters are lowercase (some options are uppercase), and strings do not need to be quoted.</li>
<li>The elements in angle brackets &lt;&gt; in command description should be taken as a parameter and be replaced as the case may be.</li>
<li>The part contained in square brackets [] or brackets () in command description is the value range that can be filled in.</li>
<li><p class="startli">The pattern of serial port commands is shown below, with each element separated by a space:</p>
<div class="fragment"><div class="line">Command ＋ Option ＋ Parameter，for example: wifi_config -c 1</div>
</div><!-- fragment --></li>
<li>Serial port commands support line breaks: <code>\n</code> and <code>\r\n</code>.</li>
<li>Serial port returns execution results at a baud rate of 115200.</li>
</ol>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md162"></a>
Wi-Fi Command</h2>
<ol type="1">
<li>Wi-Fi configuration <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>wifi_config -i -c &lt;channel (1 ~ 13)&gt; -s &lt;ssid&gt; -b &lt;bssid (xx:xx:xx:xx:xx:xx)&gt; -p &lt;password&gt; -C &lt;country_code&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone">wifi_config -i   </td><td class="markdownTableBodyNone">Get Wi-Fi information    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">wifi_config -c -s -b -p -C   </td><td class="markdownTableBodyNone">Set Wi-Fi configuration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>-i</code> or <code>--info</code>   </td><td class="markdownTableBodyNone">Wi-Fi information    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-c</code> or <code>--channel</code>   </td><td class="markdownTableBodyNone">Wi-Fi work channel    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-s</code> or <code>--ssid</code>   </td><td class="markdownTableBodyNone">AP SSID    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-b</code> or <code>--bssid</code>   </td><td class="markdownTableBodyNone">AP BSSID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-p</code> or <code>--password</code>   </td><td class="markdownTableBodyNone">AP password    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-C</code> or <code>--country_code</code>   </td><td class="markdownTableBodyNone">Set the current country code    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">wifi_config -s <code>"ssid"</code> -p <code>"password"</code>   </td><td class="markdownTableBodyNone">Wi-Fi sets and connects to the AP with SSID as "ssid" and password as "password".    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">wifi_config -c 11   </td><td class="markdownTableBodyNone">Configure the working channel of the ESP-NOW device to be 11   </td></tr>
</table>
</li>
<li>Scan command <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>wifi_scan -r &lt;rssi (-120 ~ 0)&gt; -s &lt;ssid&gt; -b &lt;bssid (xx:xx:xx:xx:xx:xx)&gt; -p &lt;time (ms)&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone">wifi_scan -r -s -b -p   </td><td class="markdownTableBodyNone">Scan APs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>-r</code> or <code>--rssi</code>   </td><td class="markdownTableBodyNone">Filter devices by RSSI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-s</code> or <code>--ssid</code>   </td><td class="markdownTableBodyNone">Filter devices by SSID    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-b</code> or <code>--bssid</code>   </td><td class="markdownTableBodyNone">Filter devices by BSSID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-p</code> or <code>--passive</code>   </td><td class="markdownTableBodyNone">Passive scan time of each channel    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">wifi_scan   </td><td class="markdownTableBodyNone">Scan all APs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">wifi_scan -r -60   </td><td class="markdownTableBodyNone">Scan devices with RSSI signal value within -60    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">wifi_scan -p 600 -b 30:ae:a4:80:16:3c   </td><td class="markdownTableBodyNone">Scan devices with BSSID 30:ae:a4:80:16:3c and set passive scan time 600 ms every channel   </td></tr>
</table>
</li>
<li>Ping command <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>ping &lt;host&gt; -W &lt;t&gt; -i &lt;t&gt; -s &lt;n&gt; -c &lt;n&gt; -Q &lt;n&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone"><code>ping host -w -i -s -c -Q</code>   </td><td class="markdownTableBodyNone">Send ICMP ECHO_REQUEST to network hosts    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>host</code>   </td><td class="markdownTableBodyNone">Host address    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-w</code> or <code>--timeout</code>   </td><td class="markdownTableBodyNone">Time to wait for a response, in seconds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-i</code> or <code>--interval</code>   </td><td class="markdownTableBodyNone">Wait interval seconds between sending each packet    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-s</code> or <code>--size</code>   </td><td class="markdownTableBodyNone">Specify the number of data bytes to be sent    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-c</code> or <code>--count</code>   </td><td class="markdownTableBodyNone">Stop after sending count packets    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-Q</code> or <code>--tos</code>   </td><td class="markdownTableBodyNone">Set Type of service related bits in IP datagrams    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">ping 192.168.0.1   </td><td class="markdownTableBodyNone">Ping host address 192.168.0.1   </td></tr>
</table>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md163"></a>
ESP-NOW Command</h2>
<ol type="1">
<li>Scan <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>scan &lt;addr (xx:xx:xx:xx:xx:xx)&gt; -a -r &lt;rssi (-120 ~ 0)&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone"><code>scan &lt;addr&gt; -a -r</code>   </td><td class="markdownTableBodyNone">Find devices that support ESP-NOW debug    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>&lt;addr&gt;</code>   </td><td class="markdownTableBodyNone">MAC of the monitored device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-a</code> or <code>--all</code>   </td><td class="markdownTableBodyNone">Full channel scan    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-r</code> or <code>--rssi</code>   </td><td class="markdownTableBodyNone">Filter devices by RSSI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">scan -a   </td><td class="markdownTableBodyNone">Scan all devices in all channel    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">scan -r -60   </td><td class="markdownTableBodyNone">Scan devices with RSSI signal value within -60    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">scan 30:ae:a4:80:16:3c   </td><td class="markdownTableBodyNone">Scan devices with BSSID 30:ae:a4:80:16:3c   </td></tr>
</table>
</li>
<li>Provisioning <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>provisioning -er -i &lt;beacon_time(s)&gt; &lt;ap_ssid&gt; &lt;app_password&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone">provisioning -e -r -i   </td><td class="markdownTableBodyNone">Provisioning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>-e</code> or <code>--erase</code>   </td><td class="markdownTableBodyNone">Reset WiFi provisioning information and restart    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-r</code> or <code>--responder</code>   </td><td class="markdownTableBodyNone">Responder devices start provisioning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-i</code> or <code>--initiator</code>   </td><td class="markdownTableBodyNone">Set provisioning beacon time    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>ap_ssid</code> <code>ap_password</code>   </td><td class="markdownTableBodyNone">Configure network for devices    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">provisioning -e   </td><td class="markdownTableBodyNone">Reset WiFi provisioning information and restart    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">provisioning -r   </td><td class="markdownTableBodyNone">Responder devices start provisioning    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">provisioning -i 30000 myssid mypassword   </td><td class="markdownTableBodyNone">Send provisioning beacon for 30 s and send WiFi configuration to responder devices   </td></tr>
</table>
</li>
<li>Control <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>control -lasC -b &lt;initiator_attribute&gt; -u &lt;initiator_attribute&gt; -c &lt;initiator_attribute&gt; -m &lt;addr (xx:xx:xx:xx:xx:xx)&gt; -t &lt;responder_attribute&gt; -v &lt;responder_value&gt; -b &lt;count&gt; -t &lt;count&gt; -r &lt;rssi&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone">control -lasC -b -u -c -m -t -v -b -t -r   </td><td class="markdownTableBodyNone">Control devices by esp-now command    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>-l</code> or <code>--list</code>   </td><td class="markdownTableBodyNone">Get device binding list    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-a</code> or <code>--ack</code>   </td><td class="markdownTableBodyNone">Wait for the receiving device to return ack    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-s</code> or <code>--filter_weak_signal</code>   </td><td class="markdownTableBodyNone">Discard packets which rssi is lower than forward_rssi    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-C</code> or <code>--filter_adjacent_channel</code>   </td><td class="markdownTableBodyNone">Discard packets from adjacent channels    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-b</code> or <code>--bind</code>   </td><td class="markdownTableBodyNone">Binding with response device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-u</code> or <code>--unbind</code>   </td><td class="markdownTableBodyNone">Unbinding with response device    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-c</code> or <code>--command</code>   </td><td class="markdownTableBodyNone">Control command to bound device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-m</code> or <code>--mac</code>   </td><td class="markdownTableBodyNone">MAC of the monitored device    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-t</code> or <code>--responder_attribute</code>   </td><td class="markdownTableBodyNone">Responder's attribute    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-v</code> or <code>--responder_value</code>   </td><td class="markdownTableBodyNone">Responder's value    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-b</code> or <code>--broadcast</code>   </td><td class="markdownTableBodyNone">Broadcast packet    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-t</code> or <code>--forward_ttl</code>   </td><td class="markdownTableBodyNone">Number of hops in data transfer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-r</code> or <code>--forward_rssi</code>   </td><td class="markdownTableBodyNone">Discard packet which rssi is lower than forward_rssi    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">control -b 0x200   </td><td class="markdownTableBodyNone">Bind device, initiator_attribute: 512    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">control -u 0x200   </td><td class="markdownTableBodyNone">Unbind device, initiator_attribute: 512    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">control -c 0x200 -t 0x1 -v 0   </td><td class="markdownTableBodyNone">Send control command,initiator_attribute: 512, set responder_attribute: 1, responder_value: 0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">control -c 0x200 -t 0x101 -v 100   </td><td class="markdownTableBodyNone">Send control command,initiator_attribute: 512, set responder_attribute: 257, responder_value: 100   </td></tr>
</table>
</li>
<li>OTA <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>ota -d &lt;url&gt; -f &lt;wait_tick&gt; -s &lt;xx:xx:xx:xx:xx:xx&gt;,&lt;xx:xx:xx:xx:xx:xx&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone">ota -d -f -s   </td><td class="markdownTableBodyNone">Firmware update    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>-d</code> or <code>--download</code>   </td><td class="markdownTableBodyNone">Firmware Download url    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-f</code> or <code>--find</code>   </td><td class="markdownTableBodyNone">Find upgradeable devices    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>-s</code> or <code>--send</code>   </td><td class="markdownTableBodyNone">Send firmware to selected device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">ota -d <a href="http://192.168.0.3:8070/hello-world.bin">http://192.168.0.3:8070/hello-world.bin</a>   </td><td class="markdownTableBodyNone">Download Firmware    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">ota -f 3000   </td><td class="markdownTableBodyNone">Find upgradeable devices for no more than 3s    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">ota -s 30:ae:a4:80:16:3c   </td><td class="markdownTableBodyNone">Send firmware to 30:ae:a4:80:16:3c   </td></tr>
</table>
</li>
<li>Configuration <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone">&lsquo;espnow_config -i -c &lt;channel (1 ~ 13)&gt; -r &lt;rate (wifi_phy_rate_t)&gt; -t &lt;tx_power (8, 84)&gt; -p &lt;protocol_bitmap[1, 2, 4, 8]&gt; -C &lt;country_code ('CN&rsquo;, 'JP, 'US')&gt;<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; Command \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; espnow_config -i -c -r -t -p -C \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; ESP-NOW configuration \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Parameter \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-i<code>or</code>&ndash;info<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Print all configuration information \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-c<code>or</code>&ndash;channel<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Channel of ESP-NOW \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-r<code>or</code>&ndash;rate<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Wi-Fi PHY rate encodings \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-t<code>or</code>&ndash;tx_power<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Set maximum transmitting power after WiFi start \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-p<code>or</code>&ndash;protocol<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Set protocol type of specified interface \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-C<code>or</code>&ndash;country_code<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Set the current country code \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Example \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; espnow_config -i \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; espnow_config -r 0x0B \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Config ESPNOW data rate 6 Mbps \ilinebr &lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;</code></td></tr>
</table>
</li>
<li><code>Iperf &lt;table class="markdownTable"&gt; &lt;tr class="markdownTableHead"&gt; &lt;th class="markdownTableHeadNone"&gt; \ilinebr &lt;/th&gt; &lt;th class="markdownTableHeadNone"&gt; \ilinebr &lt;/th&gt; &lt;th class="markdownTableHeadNone"&gt; Note \ilinebr &lt;/th&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Command definition \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>espnow_iperf -spga -c &lt;responder (xx:xx:xx:xx:xx:xx)&gt; -i &lt;interval (sec)&gt; -l &lt;len (Bytes)&gt; -t &lt;time (sec)&gt; -b &lt;count&gt;<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; Command \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; espnow_iperf -spga -c -i -l -t -b \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; ESP-NOW iperf \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; Parameter \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-s<code>or</code>&ndash;responder<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Run in responder mode, receive from throughput or ping \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-p<code>or</code>&ndash;ping<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Run in ping mode, send to responder \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-g<code>or</code>&ndash;group<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Send a package to a group \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-a<code>or</code>&ndash;abort<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Abort running espnow-iperf \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-c<code>or</code>&ndash;initiator<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Run in initiator mode, ping to</code>&lt;responder&gt;<code>\ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-i<code>or</code>&ndash;interval<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Seconds between periodic bandwidth reports (default 3 secs) \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-l<code>or</code>&ndash;len<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Length of buffer in bytes to read or write (Defaults: 230 Bytes) \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowEven"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-t<code>or</code>&ndash;time<code>\ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt; Time in seconds to transmit for (default 10 secs) \ilinebr &lt;/td&gt; &lt;/tr&gt; &lt;tr class="markdownTableRowOdd"&gt; &lt;td class="markdownTableBodyNone"&gt; \ilinebr &lt;/td&gt; &lt;td class="markdownTableBodyNone"&gt;</code>-b<code>or</code>&ndash;roadcast`  </li>
</ol>
<p>Send package by broadcast    </p>
<p>Example   </p>
<p>espnow_iperf -s   </p>
<p>Run in responder mode    </p>
<p>espnow_iperf -c 30:ae:a4:80:16:3c   </p>
<p>Send iperf packages to responder mac   </p>
<h2><a class="anchor" id="autotoc_md164"></a>
<em>Command</em> Command</h2>
<ol type="1">
<li>Command <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone"></th><th class="markdownTableHeadNone">Note    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Command definition   </td><td class="markdownTableBodyNone"><code>command -a &lt;addr_list (xx:xx:xx:xx:xx:xx,xx:xx:xx:xx:xx:xx)&gt; &lt;"Command"&gt;</code>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Command   </td><td class="markdownTableBodyNone">command addr_list "Command"   </td><td class="markdownTableBodyNone">Let the console command run on the monitoring device    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Parameter   </td><td class="markdownTableBodyNone"><code>-a</code> or <code>--channel_all</code>   </td><td class="markdownTableBodyNone">Send packets on all channels    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>addr_list</code>   </td><td class="markdownTableBodyNone">Device MAC address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"><code>"Command"</code>   </td><td class="markdownTableBodyNone">The command to be executed on a specific device    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Example   </td><td class="markdownTableBodyNone">command 30:ae:a4:80:16:3c "help"   </td><td class="markdownTableBodyNone">Run help command on device 30:ae:a4:80:16:3c   </td></tr>
</table>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md165"></a>
Other Command</h2>
<ul>
<li><code>help</code>: prints all currently supported commands.</li>
</ul>
<h2><a class="anchor" id="autotoc_md166"></a>
Web Server</h2>
<p>The function is disabled by default. If you want to use the function, please follow the steps.</p>
<ul>
<li>Open Web server under <code>Example Configuration</code> Options:<ul>
<li>Set <code>Enable WebServer for ESP-NOW debug</code> to <code>y</code>, default is <code>n</code>.</li>
<li>Set <code>mDNS Host Name</code>, default is <code>espnow-webserver</code></li>
<li>Set <code>WiFi SoftAP SSID</code>, default is <code>espnow-webserver</code></li>
<li>Set <code>Website mount point in VFS</code>, default is <code>/www</code></li>
</ul>
</li>
<li>Connect PC or phone to <code>Wi-Fi SoftAP</code></li>
<li>Open url <code><a href="http://espnow-webserver">http://espnow-webserver</a></code> in web browser, and customer can debug devices through the web browser, like getting all devices log and status, controlling or upgrading the monitored devices.</li>
</ul>
<p><img src="../../docs/_static/zh_CN/web_server.png" alt="" width="1000" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md167"></a>
Post monitored device log to HTTP server</h2>
<p>The function is disabled by default. If you want to use the function, please follow the steps.</p>
<ol type="1">
<li>Run HTTP server with follow command or start TCP server on PC or phone.</li>
</ol>
<div class="fragment"><div class="line">python -m http.server 8070</div>
</div><!-- fragment --><ol type="1">
<li>Configure the devices with <code>idf.py menuconfig</code> under <code>Example Configuration</code> Options:<ul>
<li>Set <code>Post flash log to HTTP server</code> to <code>y</code>.</li>
<li>Set the server URL <code>Flash log URL endpoint</code></li>
</ul>
</li>
<li>Build &amp; flash &amp; Run the device, connect the device to the Router (Access-Point) by WiFi command or provision command.</li>
</ol>
<p>After the device connected to the Router (Access-Point), it will post log to the HTTP server.</p>
<blockquote class="doxtable">
<p>Note: </p>
</blockquote>
<ol type="1">
<li>ESP32 and phone should be connected to the same router, so that data information can be collected on the network assistant tool.</li>
</ol>
<h1><a class="anchor" id="autotoc_md168"></a>
Note</h1>
<ol type="1">
<li>Impact on Performance. Since ESP-NOW uses a Wi-Fi interface to send and receive data packages, delay may occur in receiving commands or in data transmission if there is a large amount of data to be transmitted among ESP-NOW devices. By testing in a good network, we provide the following thresholds, and with such configuration parameters, the delay caused to devices is negligible.<ul>
<li>Fifty ESP-NOW devices (The more the devices, the worse the network.)</li>
<li>Set logging level to <code>info</code> (The lower the level, the worse the network may be.)</li>
</ul>
</li>
<li>It should also be noted that when using a new chip for burning, the chip needs to be erased and then burned.</li>
<li>The <a class="el" href="structlog__info.html">log_info</a> area is added to the partition table in this example as a space to save logs. The chip needs to be erased before programming.</li>
<li>The head of the data is a timestamp. It is just an experiment and there is no real-time calibration. It can be modified according to the user's own needs.</li>
<li><p class="startli">Get the status of log mode <code>uart</code>, <code>flash</code>, <code>espnow</code> in the console command <code>log -i</code>. The <code>console</code> command can't be used to disable the log configuration, because the main program has been forced to be enabled. If the user do not want to use such a function, the main program can be disable.</p>
<div class="fragment"><div class="line">// espnow_log_init(&amp;log_config);</div>
</div><!-- fragment --> </li>
</ol>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
