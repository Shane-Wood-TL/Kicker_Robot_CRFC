<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kicker Controller: managed_components/espressif__esp-now/examples/wireless_debug/components/web_server Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kicker Controller
   </div>
   <div id="projectbrief">Senior Design Project 2025 for the Controller for the Kicker Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_230ff1e69d1001871a4401f345fc5388.html">managed_components</a></li><li class="navelem"><a class="el" href="dir_53b0c73583c5ec3ac167a7c3a40a70e1.html">espressif__esp-now</a></li><li class="navelem"><a class="el" href="dir_a284544a182ea467cb5e8d18d1856e3a.html">examples</a></li><li class="navelem"><a class="el" href="dir_7a58723e8d8e7e0b3cfae779c7022b8f.html">wireless_debug</a></li><li class="navelem"><a class="el" href="dir_fa265e328710da6d952923b4c469bf27.html">components</a></li><li class="navelem"><a class="el" href="dir_6ee3d351a146004f4acf4633f1943caf.html">web_server</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">web_server Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_a951edf03abcca0dbd7ff14a17e6159b.html">include</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="dns__server_8c_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__server_8c.html">dns_server.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="dns__server_8h_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dns__server_8h.html">dns_server.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><a href="web__server_8c_source.html"><span class="icondoc"></span></a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="web__server_8c.html">web_server.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>(See the README.md file in the upper level 'examples' directory for more information about examples.)</p>
<h1><a class="anchor" id="autotoc_md141"></a>
Overview</h1>
<p>This example mainly introduces how to implement a RESTful API server and HTTP server on ESP32, with a frontend browser UI.</p>
<p>This example designs several APIs to fetch resources as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">API   </th><th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Resource Example   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Page URL    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/v1/system/info</code>   </td><td class="markdownTableBodyNone"><code>GET</code>   </td><td class="markdownTableBodyNone">{<br  />
version:"v4.0-dev",<br  />
cores:2<br  />
}   </td><td class="markdownTableBodyNone">Used for clients to get system information like IDF version, ESP32 cores, etc   </td><td class="markdownTableBodyNone"><code>/</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>/api/v1/temp/raw</code>   </td><td class="markdownTableBodyNone"><code>GET</code>   </td><td class="markdownTableBodyNone">{<br  />
raw:22<br  />
}   </td><td class="markdownTableBodyNone">Used for clients to get raw temperature data read from sensor   </td><td class="markdownTableBodyNone"><code>/chart</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>/api/v1/light/brightness</code>   </td><td class="markdownTableBodyNone"><code>POST</code>   </td><td class="markdownTableBodyNone">{ <br  />
red:160,<br  />
green:160,<br  />
blue:160<br  />
}   </td><td class="markdownTableBodyNone">Used for clients to upload control values to ESP32 in order to control LED’s brightness   </td><td class="markdownTableBodyNone"><code>/light</code>   </td></tr>
</table>
<p><b>Page URL</b> is the URL of the webpage which will send a request to the API.</p>
<h2><a class="anchor" id="autotoc_md142"></a>
About mDNS</h2>
<p>The IP address of an IoT device may vary from time to time, so it’s impracticable to hard code the IP address in the webpage. In this example, we use the <code>mDNS</code> to parse the domain name <code>esp-home.local</code>, so that we can alway get access to the web server by this URL no matter what the real IP address behind it. See <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/protocols/mdns.html">here</a> for more information about mDNS.</p>
<p><b>Notes: mDNS is installed by default on most operating systems or is available as separate package.</b></p>
<h2><a class="anchor" id="autotoc_md143"></a>
About deploy mode</h2>
<p>In development mode, it would be awful to flash the whole webpages every time we update the html, js or css files. So it is highly recommended to deploy the webpage to host PC via <code>semihost</code> technology. Whenever the browser fetch the webpage, ESP32 can forward the required files located on host PC. By this mean, it will save a lot of time when designing new pages.</p>
<p>After developing, the pages should be deployed to one of the following destinations:</p>
<ul>
<li>SPI Flash - which is recommended when the website after built is small (e.g. less than 2MB).</li>
<li>SD Card - which would be an option when the website after built is very large that the SPI Flash have not enough space to hold (e.g. larger than 2MB).</li>
</ul>
<h2><a class="anchor" id="autotoc_md144"></a>
About frontend framework</h2>
<p>Many famous frontend frameworks (e.g. Vue, React, Angular) can be used in this example. Here we just take <a href="https://vuejs.org/">Vue</a> as example and adopt the <a href="https://vuetifyjs.com/">vuetify</a> as the UI library.</p>
<h1><a class="anchor" id="autotoc_md145"></a>
How to use example</h1>
<h2><a class="anchor" id="autotoc_md146"></a>
Hardware Required</h2>
<p>To run this example, you need an ESP32 dev board (e.g. ESP32-WROVER Kit, ESP32-Ethernet-Kit) or ESP32 core board (e.g. ESP32-DevKitC). An extra JTAG adapter might also needed if you choose to deploy the website by semihosting. For more information about supported JTAG adapter, please refer to <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/jtag-debugging/index.html#jtag-debugging-selecting-jtag-adapter">select JTAG adapter</a>. Or if you choose to deploy the website to SD card, an extra SD slot board is needed.</p>
<h3><a class="anchor" id="autotoc_md147"></a>
Pin Assignment:</h3>
<p>Only if you deploy the website to SD card, then the following pin connection is used in this example.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ESP32   </th><th class="markdownTableHeadNone">SD Card    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GPIO2   </td><td class="markdownTableBodyNone">D0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GPIO4   </td><td class="markdownTableBodyNone">D1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GPIO12   </td><td class="markdownTableBodyNone">D2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GPIO13   </td><td class="markdownTableBodyNone">D3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">GPIO14   </td><td class="markdownTableBodyNone">CLK    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">GPIO15   </td><td class="markdownTableBodyNone">CMD   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md148"></a>
Configure the project</h2>
<p>Open the project configuration menu (<code>idf.py menuconfig</code>).</p>
<p>In the <code>Example Connection Configuration</code> menu:</p>
<ul>
<li>Choose the network interface in <code>Connect using</code> option based on your board. Currently we support both Wi-Fi and Ethernet.</li>
<li>If you select the Wi-Fi interface, you also have to set:<ul>
<li>Wi-Fi SSID and Wi-Fi password that your esp32 will connect to.</li>
</ul>
</li>
<li>If you select the Ethernet interface, you also have to set:<ul>
<li>PHY model in <code>Ethernet PHY</code> option, e.g. IP101.</li>
<li>PHY address in <code>PHY Address</code> option, which should be determined by your board schematic.</li>
<li>EMAC Clock mode, GPIO used by SMI.</li>
</ul>
</li>
</ul>
<p>In the <code>Example Configuration</code> menu:</p>
<ul>
<li>Set the domain name in <code>mDNS Host Name</code> option.</li>
<li>Choose the deploy mode in <code>Website deploy mode</code>, currently we support deploy website to host PC, SD card and SPI Nor flash.<ul>
<li>If we choose to <code>Deploy website to host (JTAG is needed)</code>, then we also need to specify the full path of the website in <code>Host path to mount (e.g. absolute path to web dist directory)</code>.</li>
</ul>
</li>
<li>Set the mount point of the website in <code>Website mount point in VFS</code> option, the default value is <code>/www</code>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md149"></a>
Build and Flash</h2>
<p>After the webpage design work has been finished, you should compile them by running following commands:</p>
<div class="fragment"><div class="line">cd path_to_this_example/front/web-demo</div>
<div class="line">npm install</div>
<div class="line">npm run build</div>
</div><!-- fragment --><p>After a while, you will see a <code>dist</code> directory which contains all the website files (e.g. html, js, css, images).</p>
<p>Run <code>idf.py -p PORT flash monitor</code> to build and flash the project..</p>
<p>(To exit the serial monitor, type <code>Ctrl-]</code>.)</p>
<p>See the <a href="https://docs.espressif.com/projects/esp-idf/en/latest/get-started/index.html">Getting Started Guide</a> for full steps to configure and use ESP-IDF to build projects.</p>
<h2><a class="anchor" id="autotoc_md150"></a>
Extra steps to do for deploying website by semihost</h2>
<p>We need to run the latest version of OpenOCD which should support semihost feature when we test this deploy mode:</p>
<div class="fragment"><div class="line">openocd-esp32/bin/openocd -s openocd-esp32/share/openocd/scripts -f board/esp32-wrover-kit-3.3v.cfg</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md151"></a>
Example Output</h1>
<h2><a class="anchor" id="autotoc_md152"></a>
Render webpage in browser</h2>
<p>In your browser, enter the URL where the website located (e.g. <code><a href="http://esp-home.local">http://esp-home.local</a></code>). You can also enter the IP address that ESP32 obtained if your operating system currently don't have support for mDNS service.</p>
<p>Besides that, this example also enables the NetBIOS feature with the domain name <code>esp-home</code>. If your OS supports NetBIOS and has enabled it (e.g. Windows has native support for NetBIOS), then the URL <code><a href="http://esp-home">http://esp-home</a></code> should also work.</p>
<p><img src="https://dl.espressif.com/dl/esp-idf/docs/_static/esp_home_local.gif" alt="esp_home_local" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md153"></a>
ESP monitor output</h2>
<p>In the <em>Light</em> page, after we set up the light color and click on the check button, the browser will send a post request to ESP32, and in the console, we just print the color value.</p>
<div class="fragment"><div class="line">I (6115) example_connect: Connected to Ethernet</div>
<div class="line">I (6115) example_connect: IPv4 address: 192.168.2.151</div>
<div class="line">I (6325) esp-home: Partition size: total: 1920401, used: 1587575</div>
<div class="line">I (6325) esp-rest: Starting HTTP Server</div>
<div class="line">I (128305) esp-rest: File sending complete</div>
<div class="line">I (128565) esp-rest: File sending complete</div>
<div class="line">I (128855) esp-rest: File sending complete</div>
<div class="line">I (129525) esp-rest: File sending complete</div>
<div class="line">I (129855) esp-rest: File sending complete</div>
<div class="line">I (137485) esp-rest: Light control: red = 50, green = 85, blue = 28</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md154"></a>
Troubleshooting</h1>
<ol type="1">
<li>Error occurred when building example: &lsquo;...front/web-demo/dist doesn't exit. Please run 'npm run build&rsquo; in ...front/web-demo<code>.<ul>
<li>When you choose to deploy website to SPI flash, make sure the</li>
</ul>
</code>dist` directory has been generated before you building this example.</li>
</ol>
<p>(For any technical queries, please open an <a href="https://github.com/espressif/esp-idf/issues">issue</a> on GitHub. We will get back to you as soon as possible.) </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
